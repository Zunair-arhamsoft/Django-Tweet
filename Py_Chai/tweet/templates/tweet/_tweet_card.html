{% with tweet=item %}
<div class="col-md-6 col-lg-4 d-flex tweet-card">
  <div class="card shadow-sm border-0 flex-fill d-flex flex-column">
    <div class="card-body d-flex flex-column">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <a href="{% url 'accounts:profile' tweet.user %}">
            <h6 class="mb-0 fw-bold text-primary">@{{ tweet.user }}</h6>
        </a>
        <small class="text-muted">{{ tweet.created_at }}</small>
      </div>

      <p class="mb-2 text-truncate-3">{{ tweet.text }}</p>

      {% if tweet.photo_url %}
      <div class="mb-2">
        <img src="{{ tweet.photo_url }}" class="img-fluid rounded" style="max-height: 180px; object-fit: cover; width: 100%;" />
      </div>
      {% endif %}

      <div class="mt-auto">
        <div class="like-section" data-tweet-id="{{ tweet.id }}">
          <button type="button" class="btn btn-sm w-100 mb-2 like-btn {% if tweet.liked %}btn-danger{% else %}btn-outline-danger{% endif %}">
            ❤️ <span class="like-count">{{ tweet.like_count }}</span>
          </button>
        </div>

        <div class="d-flex gap-2">
          {% if tweet.is_owner %}
          <a href="{% url 'tweet:tweet_edit' tweet.id %}" class="btn btn-sm btn-outline-primary w-50">Edit</a>
          <a href="{% url 'tweet:tweet_delete' tweet.id %}" class="btn btn-sm btn-outline-danger w-50">Delete</a>
          {% else %}
          <button class="btn btn-sm w-50 invisible">Edit</button>
          <button class="btn btn-sm w-50 invisible">Delete</button>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endwith %}
